{% extends "page.html" %}

{% block main %}

<div class="container">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Repository</th>
        <th>Ref</th>
        <th>Status</th>
        <th class="text-center"><a id="add-image" role="button" class="btn btn-primary btn-xs">Add New</a></th>
      </tr>
      {% for image in images %}
      <tr >
        <td class="repo-col col-sm-5">
          <a href="{{ image.repo }}">{{ image.repo }}</a>
        </td>
        <td class="ref-col col-sm-3">
          <a href="{{ image.repo }}/tree/{{ image.ref }}">{{ image.ref }}</a>
        </td>
        <td class="status-col col-sm-2">
          {% if image.status == 'building' %}
            <i title="Building" class="fa fa-refresh fa-spin fa-lg fa-fw" style="color: orange;"></i>
          {%- elif image.status == 'built' %}
            <i title="Built" class="fa fa-check-square fa-lg fa-fw" style="color: green;"></i>
          {%- endif %}
        </td>
        <td class="build-col col-sm-1 text-center">
          {%if image.status == 'built' %}
          <a role="button" class="build-image btn btn-xs btn-danger">
            Remove
          </a>
          {%- endif %}
        </td>
      </tr>
      {% endfor %}
    </thead>
    <tbody>
  </tbody>
  </table>
</div>


{% macro image_modal(name, multi=False) %}
{% call modal(name, btn_class='btn-primary save-button') %}
<div class="form-group">
  <input type="text" class="form-control repo-input" placeholder="Repository URL"/>
  <input type="text" class="form-control ref-input " placeholder="Ref"/>
</div>
{% endcall %}
{% endmacro %}

{{ image_modal('Add Image') }}

{% endblock %}

{% block script %}
{{ super() }}
<script type="text/javascript">
require(["images"]);
</script>
{% endblock %}
